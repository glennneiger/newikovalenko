/**
 MapSVG Lite 6.2.8 - Interactive Map Plugin
 Author: Roman S. Stepanov
 http://codecanyon.net/user/Yatek/portfolio?ref=Yatek

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 2 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 http://www.gnu.org/licenses/

 */
!function($){function isNumber(t){return!isNaN(parseFloat(t))&&isFinite(t)}function ucfirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}function parseBoolean(t){switch(String(t).toLowerCase()){case"on":case"true":case"1":case"yes":case"y":return!0;case"off":case"false":case"0":case"no":case"n":return!1;default:return}}function safeURL(t){return(0==t.indexOf("http://")||0==t.indexOf("https://"))&&(t="//"+t.split("://").pop()),t}function extend(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function MapObject(){this.id=""}function Region(t,e,o,i){if(MapObject.call(this),this.node=t,this.nodeType=t[0].tagName,this.globalOptions=e,this.mapsvg=i,this.id=this.node.attr("id"),this.id||(this.setId(this.nodeType+"_"+o.id++),this.autoID=!0),this.title=this.node.attr("title"),this.node[0].setAttribute("class","mapsvg-region"),this.svg_style={fill:this.getComputedStyle("fill")},this.svg_style.stroke=this.getComputedStyle("stroke"),_browser.ie){var s=this.getComputedStyle("stroke-width");s=s?s.replace("px",""):"1",s="1"==s?1.2:parseFloat(s),this.svg_style["stroke-width"]=s}else this.node.css({"vector-effect":"non-scaling-stroke"});var r=e.regions&&e.regions[this.id]?e.regions[this.id]:null;this.disabled=this.getDisabledState(),this.disabled&&this.attr("class",this.attr("class")+" mapsvg-disabled"),this.default_attr={},this.selected_attr={},this.hover_attr={},this.mapsvg_type="region";var n=!1;r&&r.selected&&(n=!0,delete r.selected),r&&this.update(r),this.setFill(),n&&this.setSelected(!0),this.saveState()}function Marker(t,e){if(!t.id||!t.src)return!1;MapObject.call(this);var o=document.createElementNS("http://www.w3.org/2000/svg","image");o.setAttributeNS(null,"height",t.height),o.setAttributeNS(null,"width",t.width),o.setAttributeNS("http://www.w3.org/1999/xlink","href",t.src),o.setAttributeNS(null,"x",t.x),o.setAttributeNS(null,"y",t.y),o.setAttributeNS(null,"visibility","visible"),o.setAttribute("class","mapsvg-marker"),this.node=$(o),this.src=t.src,this.setId(t.id),this.mapsvg_type="marker",this.x=parseFloat(t.x),this.y=parseFloat(t.y),this.width=parseFloat(t.width),this.height=parseFloat(t.height),this.tooltip=t.tooltip,this.popover=t.popover,this.href=t.href,this.target=t.target,this["default"]={x:this.x,y:this.y,width:this.width,height:this.height},this.geoCoords=t.geoCoords,this.data=t.data}var mapSVG={};MapObject.prototype.getComputedStyle=function(t,e){if(e=e||this.node[0],_p1=e.getAttribute(t))return _p1;if(_p2=e.getAttribute("style")){var o=_p2.split(";"),i=o.filter(function(e){var e=e.trim(),o=e.split(":");return o[0]==t?!0:void 0});if(i.length)return i[0].split(":").pop().trim()}var s=$(e).parent(),r=s.length?s[0].tagName:null;return r&&"svg"!=r?this.getComputedStyle(t,s[0]):void 0},MapObject.prototype.getStyle=function(t){if(_p1=this.attr(t))return _p1;if(_p2=this.attr("style")){var e=_p2.split(";"),o=e.filter(function(e){var e=e.trim();return 0===e.indexOf(t)?e:void 0});return o.length?o[0].split(":").pop().trim():void 0}return""},MapObject.prototype.getCenter=function(){var t=this.node[0].getBoundingClientRect().left,e=this.node[0].getBoundingClientRect().top,o=this.node[0].getBoundingClientRect().width,i=this.node[0].getBoundingClientRect().height;return[t+o/2,e+i/2]},MapObject.prototype.setTooltip=function(t){this.tooltip=t?t:void 0},MapObject.prototype.setPopover=function(t){this.popover=t?t:void 0},MapObject.prototype.setHref=function(t){if(this.href&&this.node.parent("a").length&&this.node.unwrap(),this.href=t?t:void 0,this.href){var e="http://www.w3.org/1999/xlink",o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"a");i.setAttributeNS(e,"href",this.href),this.target&&i.setAttribute("target",this.target),this.node.wrap($(i))}},MapObject.prototype.setTarget=function(t){if(this.target=t?t:void 0,this.href){var e=this.node.parent("a")[0];this.target?e.setAttribute("target",t):e.removeAttribute("target")}},MapObject.prototype.setData=function(data){if(data){if("string"==typeof data)if("["==data.substr(0,1)||"{"==data.substr(0,1))try{var tmp;eval("tmp = "+data),this.data=tmp}catch(err){var error="MapSVG: Error in Data object for "+this.mapsvg_type+" '"+this.id+"'. Data object was set to empty object {}.";return this.data={},{_error:error}}else this.data=data;else this.data=data;return this.data}this.data=void 0},MapObject.prototype.attr=function(t,e){var o=this.node[0];if("object"==typeof t)$.each(t,function(t,e){("string"==typeof e||"number"==typeof e)&&o.setAttribute(t,e)});else if("string"!=typeof t||"string"!=typeof e&&"number"!=typeof e){if(void 0==e)return o.getAttribute(t)}else o.setAttribute(t,e)},MapObject.prototype.setId=function(t){return t?(this.id=t,void this.node[0].setAttribute("id",t)):!1},extend(Region,MapObject),Region.prototype.saveState=function(){this.initialState=JSON.stringify(this.getOptions())},Region.prototype.changed=function(){return JSON.stringify(this.getOptions())!=this.initialState},Region.prototype.getOptions=function(t){var e=(this.globalOptions.regions[this.id],{id:this.id,title:this.title,disabled:this.disabled===this.getDisabledState(!0)?void 0:this.disabled,tooltip:this.tooltip,popover:this.popover,href:this.href,target:this.target,data:this.data});return t&&(e.disabled=this.disabled),$.each(e,function(t,o){void 0==o&&delete e[t]}),e},Region.prototype.update=function(t){for(var e in t){var o="set"+ucfirst(e);o in this&&this[o](t[e])}},Region.prototype.setFill=function(){this.disabled&&this.globalOptions.colors.disabled?this.default_attr.fill=this.globalOptions.colors.disabled:this.globalOptions.colors.base?this.default_attr.fill=this.globalOptions.colors.base:"none"!=this.svg_style.fill?this.default_attr.fill=this.svg_style.fill?this.svg_style.fill:this.globalOptions.colors.baseDefault:this.default_attr.fill="none",this.selected_attr.fill=this.globalOptions.colors.selected,this.hover_attr.fill=this.globalOptions.colors.hover,this.node.css("fill",this.default_attr.fill),this.fill=this.default_attr.fill,void 0!=this.globalOptions.colors.stroke?this.node.css("stroke",this.globalOptions.colors.stroke):this.node.css("stroke",this.svg_style.stroke),this.selected&&this.select()},Region.prototype.setDisabled=function(t){t=void 0!==t?parseBoolean(t):this.getDisabledState(),this.disabled=t,t?this.attr("class",this.attr("class")+" mapsvg-disabled"):this.attr("class",this.attr("class").replace(" mapsvg-disabled","")),this.selected=!1,this.setFill()},Region.prototype.setSelected=function(t){this.mapsvg.selectRegion(this)},Region.prototype.getDisabledState=function(t){var e=this.globalOptions.regions[this.id];return!t&&e&&void 0!==e.disabled?e.disabled:this.globalOptions.disableAll||"none"==this.svg_style.fill||"labels"==this.id||"Labels"==this.id?!0:!1},Region.prototype.highlight=function(){this.node.css({fill:this.hover_attr.fill})},Region.prototype.unhighlight=function(){this.node.css({fill:this.default_attr.fill})},Region.prototype.select=function(){this.node.css({fill:this.selected_attr.fill}),this.selected=!0},Region.prototype.deselect=function(){this.node.css({fill:this.default_attr.fill}),this.selected=!1},extend(Marker,MapObject),Marker.prototype.getOptions=function(){var t={id:this.id,tooltip:this.tooltip,popover:this.popover,href:this.href,target:this.target,data:this.data,src:this.src,width:this["default"].width,height:this["default"].height,x:this.x,y:this.y,geoCoords:this.geoCoords};return $.each(t,function(e,o){void 0==o&&delete t[e]}),t},Marker.prototype.setXY=function(t,e){this.x=t,this.y=e,this.node[0].setAttribute("x",t),this.node[0].setAttribute("y",e),this.adjustPosition(this.mapScale)},Marker.prototype.update=function(t,e){for(var o in t){var i="set"+ucfirst(o);i in this&&this[i](t[o],e)}},Marker.prototype.setSrc=function(t,e){if(!t)return!1;t=safeURL(t),e=e||this.mapScale;var o=new Image,i=this;o.onload=function(){i["default"].width=this.width,i["default"].height=this.height,i.x=i.x-(this.width-i.width)/2,i.y=i.y-(this.height-i.height),i.attr({x:i.x,y:i.y,width:this.width,height:this.height}),i.width=this.width,i.height=this.height,i.node[0].setAttributeNS("http://www.w3.org/1999/xlink","href",t),i.adjustPosition(e),i.src=t},o.src=t},Marker.prototype.adjustPosition=function(t){var e=this["default"].width,o=this["default"].height,i=e/2-e/(2*t),s=o-o/t;this.attr("width",e/t),this.attr("height",o/t),this.attr("transform","translate("+i+","+s+")"),this.mapScale=t},Marker.getDefaultCoords=function(t,e,o,i,s){return t=parseFloat(t),e=parseFloat(e),o=parseFloat(o),i=parseFloat(i),t=t+o/(2*s)-o/2,e=e+i/s-i,[t,e]},Marker.prototype.drag=function(t,e,o,i){_this=this,this.ox=this.x,this.oy=this.y,$("body").on("mousemove.drag.mapsvg",function(o){o.preventDefault();var i=mouseCoords(o),s=i.x-t.x,r=i.y-t.y;_this.x=_this.ox+s/e,_this.y=_this.oy+r/e,_this.attr({x:_this.x,y:_this.y})}),$("body").on("mouseup.drag.mapsvg",function(s){s.preventDefault(),_this.undrag();var r=mouseCoords(s),n=r.x-t.x,a=r.y-t.y;_this.x=_this.ox+n/e,_this.y=_this.oy+a/e,_this.attr({x:_this.x,y:_this.y}),o.call(_this),_this.ox==_this.x&&_this.oy==_this.y&&i.call(_this)})},Marker.prototype.undrag=function(){$("body").off(".drag.mapsvg")},Marker.prototype["delete"]=function(){this.href&&this.node.parent("a").empty().remove(),this.node.empty().remove()};var instances={},globalID=0,userAgent=navigator.userAgent.toLowerCase(),scripts=document.getElementsByTagName("script"),myScript=scripts[scripts.length-1].src.split("/");myScript.pop();var pluginJSURL=myScript.join("/")+"/";myScript.pop();var pluginRootURL=myScript.join("/")+"/",touchDevice=userAgent.indexOf("ipad")>-1||userAgent.indexOf("iphone")>-1||userAgent.indexOf("ipod")>-1||userAgent.indexOf("android")>-1,_browser={};if(_browser.ie=userAgent.indexOf("msie")>-1||userAgent.indexOf("Trident")>-1?{}:!1,_browser.firefox=userAgent.indexOf("firefox")>-1,String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),touchDevice)var mouseCoords=function(t){return t=t.originalEvent,t.touches&&t.touches[0]?{x:t.touches[0].pageX,y:t.touches[0].pageY}:{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}};else var mouseCoords=function(t){return t.pageX?{x:t.pageX,y:t.pageY}:{x:t.clientX+$(document).scrollLeft(),y:t.clientY+$(document).scrollTop()}};var defaults={markerLastID:0,regionLastID:0,disableAll:!1,width:null,height:null,lockAspectRatio:!0,loadingText:"Loading map...",colors:{baseDefault:"#000000",background:"#eeeeee",selected:"#cccccc",hover:"#9d9d9d"},regions:{},markers:[],viewBox:[],cursor:"default",afterLoad:null,zoom:{on:!1,limit:[0,10],delta:1.2,buttons:{on:!0,location:"right"}},scroll:{on:!1,limit:!1,background:!1},responsive:!1,tooltips:{mode:"off",on:!1,priority:"local"},popovers:{mode:"off",on:!1,priority:"local"},multiSelect:!1},markerOptions={src:pluginRootURL+"markers/pin1_red.png"};mapSVG=function(t,e){var o;this.methods={mouseCoords:mouseCoords,functionFromString:function(t){var e,o=!1,i=t;if(-1==i.indexOf("{")||-1==i.indexOf("function")||-1==i.indexOf("("))return{error:"MapSVG user function error: no function body."};var s=i.substring(i.indexOf("{")+1,i.lastIndexOf("}")),r=i.substring(i.indexOf("(")+1,i.indexOf(")"));try{e=new Function(r,s),success=!0}catch(n){o=n}return o?{error:{line:o.line,text:"MapSVG user function error: (line "+o.line+"): "+o.message}}:e},getOptions:function(t,e){var i=$.extend(!0,{},o.options);return i.viewBox=o._viewBox,delete i.markers,t?(i.regions=[],o.regions.forEach(function(t){i.regions.push(t.getOptions())}),i.markers=o.options.markers):(o.regions.forEach(function(t){t.changed()&&(i.regions[t.id]=t.getOptions())}),o.markers.length>0&&(i.markers=[]),o.markers.forEach(function(t){i.markers.push(t.getOptions())})),e&&$.each(i,function(t,e){JSON.stringify(e)==JSON.stringify(defaults[t])&&delete i[t]}),i},update:function(t){for(var e in t)if("regions"==e)$.each(t.regions,function(t,e){var s=i.getRegion(t);s&&s.update(e),void 0!=e.disabled&&(i.deselectRegion(s),o.options.regions[t]=o.options.regions[t]||{},o.options.regions[t].disabled=s.disabled)});else if("markers"==e)$.each(t.markers,function(t,e){var o=i.getMarker(t);if(e.geoCoords){if("string"==typeof e.geoCoords&&(e.geoCoords=e.geoCoords.trim().split(","),e.geoCoords=[parseFloat(e.geoCoords[0]),parseFloat(e.geoCoords[1])]),"object"==typeof e.geoCoords&&2==e.geoCoords.length&&$.isNumeric(e.geoCoords[0])&&$.isNumeric(e.geoCoords[1])){var s=i.convertGeoToPixel(e.geoCoords);s[0]=s[0]-o.width/2+.3,s[1]=s[1]-o.height+1.5,o.setXY(s[0],s[1])}}else o&&o.update(e)});else{var s="set"+ucfirst(e);i.hasOwnProperty(s)?this[s](t[e]):console.log("MapSVG Error: no setter "+s+"()")}},setTitle:function(t){t&&(o.options.title=t)},setDisableLinks:function(t){t=parseBoolean(t),t?o.$map.on("click.a.mapsvg","a",function(t){t.preventDefault()}):o.$map.off("click.a.mapsvg"),o.disableLinks=t},setLoadingText:function(t){o.options.loadingText=t},setLockAspectRatio:function(t){o.options.lockAspectRatio=parseBoolean(t)},setAfterLoad:function(t){o.options.afterLoad=t||void 0},setMarkerEditHandler:function(t){o.markerEditHandler=t},setRegionEditHandler:function(t){o.regionEditHandler=t},setDisableAll:function(t){t=parseBoolean(t),$.extend(!0,o.options,{disableAll:t}),o.regions.forEach(function(t){t.setDisabled()})},setColors:function(t){$.extend(!0,o.options,{colors:t}),$.each(o.options.colors,function(t,e){(null===e||""==e)&&delete e[t]}),t.background&&o.$map.css({background:o.options.colors.background}),t.hover&&(o.options.colors.hover=t.hover),t.selected&&(o.options.colors.selected=t.selected),i.regionsRedrawColors()},setTooltips:function(t){"string"==typeof t.mode&&0==t.mode.indexOf("function")?t.mode=i.functionFromString(t.mode):t.mode||(t.mode="off"),o.options.tooltips.on="off"!=o.options.tooltips.mode,$.extend(!0,o.options,{tooltips:t}),o.mapTip||(o.mapTip=$("<div />").addClass("mapsvg-tooltip"),$("body").append(o.mapTip)),o.tooltipWatchMouseHandler||$("body").on("mousemove.tooltip.mapsvg",function(t){window.m=mouseCoords(t),o.mapTip.css("left",t.clientX+$(window).scrollLeft()).css("top",t.clientY+$(window).scrollTop()+25)})},setPopovers:function(t){"string"==typeof t.mode&&0==t.mode.indexOf("function")?t.mode=i.functionFromString(t.mode):t.mode||(t.mode="off"),$.extend(!0,o.options,{popovers:t}),o.options.popovers.on="off"!=o.options.popovers.mode,o.mapPopover||(o.mapPopover=$("<div />").addClass("mapsvg-popover"),o.mapPopover.closeButton=$('<div class="mapsvg-popover-close">&#10005;</div>'),o.mapPopover.contentDiv=$('<div class="mapsvg-popover-content"></div>'),o.mapPopover.append(o.mapPopover.contentDiv),o.mapPopover.append(o.mapPopover.closeButton),o.mapPopover.css({width:o.options.popovers.width+("auto"==o.options.popovers.width?"":"px"),height:o.options.popovers.height+("auto"==o.options.popovers.height?"":"px")}),o.mapPopover.closeButton.on("click",i.hidePopover),$("body").append(o.mapPopover)),$("body").off(".popover.mapsvg",i.popoverOffHandler),touchDevice||$("body").on("mousedown.popover.mapsvg",i.popoverOffHandler)},setInitialViewBox:function(t){"string"==typeof t&&(t=t.trim().split(" ")),o._viewBox=[parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])],o.zoomLevel=0},setViewBox:function(t,e){"string"==typeof t&&(t=t.trim().split(" "));var s=t&&4==t.length?t:o.svgDefault.viewBox,r=parseInt(s[2])!=o.viewBox[2]||parseInt(s[3])!=o.viewBox[3];return o.viewBox=[parseFloat(s[0]),parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3])],t||(o._viewBox=o.viewBox,o._scale=1),o.$svg[0].setAttribute("viewBox",o.viewBox.join(" ")),i.setResponsive(o.options.responsive,!0),r&&!e&&(o.scale=i.getScale(),i.markersAdjustPosition(),_browser.ie&&i.mapAdjustStrokes()),!0},redraw:function(){o.$map.css({width:o.$map.width(),height:o.$map.width()/o.whRatio}),_browser.ie?o.$map.css({width:"auto"}):o.$map.css({width:"auto",height:"auto"}),i.updateSize()},setSize:function(t,e,s){return o.options.width=parseFloat(t),o.options.height=parseFloat(e),o.options.responsive=null!=s?parseBoolean(s):o.options.responsive,o.options.width||o.options.height?!o.options.width&&o.options.height?o.options.width=parseInt(o.options.height*o.svgDefault.width/o.svgDefault.height):o.options.width&&!o.options.height&&(o.options.height=parseInt(o.options.width*o.svgDefault.height/o.svgDefault.width)):(o.options.width=o.svgDefault.width,o.options.height=o.svgDefault.height),o.whRatio=o.options.width/o.options.height,o.scale=i.getScale(),i.setResponsive(s),o.markers&&i.markersAdjustPosition(),[o.options.width,o.options.height]},setResponsive:function(t,e){t=void 0!=t?parseBoolean(t):o.options.responsive,$(window).off("resize.mapsvg"),t?($(window).on("resize.mapsvg",i.updateSize),o.$map.hasClass("mapsvg-responsive")||(o.$map.addClass("mapsvg-responsive"),o.$map.css({width:"auto",height:"auto"})),o.$map.height(o.$map.width()/o.whRatio),$(window).on("resize.mapsvg",function(){o.$map.height(o.$map.width()/o.whRatio),i.updateSize()})):(o.$map.removeClass("mapsvg-responsive"),o.$map.css({width:o.options.width+"px",height:o.options.height+"px"})),$.extend(!0,o.options,{responsive:t}),i.updateSize()},setScroll:function(t){null!=t.on&&(t.on=parseBoolean(t.on)),null!=t.limit&&(t.limit=parseBoolean(t.limit)),$.extend(!0,o.options,{scroll:t}),i.setEventHandlers()},setZoom:function(t){t=t||{},void 0!=t.on&&(t.on=parseBoolean(t.on)),t.delta&&(t.delta=parseFloat(t.delta)),t.limit&&("string"==typeof t.limit&&(t.limit=t.limit.split(";")),t.limit=[parseInt(t.limit[0]),parseInt(t.limit[1])]),$.extend(!0,o.options,{zoom:t}),o.$map.off("mousewheel.mapsvg"),o.options.zoom.on&&o.$map.on("mousewheel.mapsvg",function(t,e,o,s){var r=e>0?1:-1;return i.zoom(r),!1}),i.setZoomButtons()},setZoomButtons:function(){var t=o.options.zoom.buttons.location||"hide";if(!o.zoomButtons){var e=$("<div />").addClass("mapsvg-buttons");e.zoomIn=$("<div />").addClass("mapsvg-btn-zoom in");var s=touchDevice?"touchstart":"click";e.zoomIn.on(s,function(t){t.stopPropagation(),i.zoomIn()}),e.zoomOut=$("<div />").addClass("mapsvg-btn-zoom out"),e.zoomOut.on(s,function(t){t.stopPropagation(),i.zoomOut()}),e.append(e.zoomIn).append(e.zoomOut),o.zoomButtons=e,o.$map.append(o.zoomButtons)}"right"==t&&o.zoomButtons.css({right:"15px",left:"auto"})||"left"==t&&o.zoomButtons.css({right:"auto",left:"15px"}),o.options.zoom.on&&"hide"!=t?o.zoomButtons.show():o.zoomButtons.hide()},setCursor:function(t){t="pointer"==t?"pointer":"default",o.options.cursor=t,"pointer"==t?o.$map.addClass("mapsvg-cursor-pointer"):o.$map.removeClass("mapsvg-cursor-pointer")},setPreloaderText:function(t){o.options.loadingText=t},setMultiSelect:function(t){o.options.multiSelect=parseBoolean(t),i.deselectAllRegions()},getRegion:function(t){return o.regions[o.regionsDict[t]]},getMarker:function(t){return o.markers[o.markersDict[t]]},checkId:function(t){return i.getRegion(t)?{error:"This ID is already being used by a Region"}:i.getMarker(t)?{error:"This ID is already being used by another Marker"}:!0},regionsRedrawColors:function(){o.regions.forEach(function(t){t.setFill()})},destroy:function(){return delete instances[o.$map.attr("id")],o.$map.empty(),i},getData:function(){return o},cnt:function(){return o.t()?!1:!0},getScale:function(){var t,e=(o.svgDefault.width/o.svgDefault.height,o.options.width/o.options.height,[o.$map.width(),o.$map.height()]);return t=e[0]/o.viewBox[2],t||1},updateSize:function(){o.scale=i.getScale(),i.markersAdjustPosition(),_browser.ie&&i.mapAdjustStrokes()},getViewBox:function(){return o.viewBox},viewBoxSetBySize:function(t,e){return o._viewBox=i.viewBoxGetBySize(t,e),o.options.width=parseFloat(t),o.options.height=parseFloat(e),i.setViewBox(o._viewBox,!0),o.whRatio=o.viewBox[2]/o.viewBox[3],o.options.responsive||i.setResponsive(),o.viewBox},viewBoxGetBySize:function(t,e){var i=t/e,s=o.svgDefault.viewBox[2]/o.svgDefault.viewBox[3],r=$.extend([],o.svgDefault.viewBox);return i!=s&&(i>s?(r[2]=o.svgDefault.viewBox[3]*i,r[0]=o.svgDefault.viewBox[0]-(r[2]-o.svgDefault.viewBox[2])/2):(r[3]=o.svgDefault.viewBox[2]/i,r[1]=o.svgDefault.viewBox[1]-(r[3]-o.svgDefault.viewBox[3])/2)),r},viewBoxReset:function(t){if(t){var e=o._viewBox||o.svgDefault.viewBox;o.zoomLevel=0,o._scale=1,i.setViewBox(e)}else i.setViewBox()},getGeoViewBox:function(){var t=o.viewBox,e=i.convertPixelToGeo(t[0],t[1])[1],s=i.convertPixelToGeo(t[0]+t[2],t[1])[1],r=i.convertPixelToGeo(t[0],t[1])[0],n=i.convertPixelToGeo(t[0],t[1]+t[3])[0];return[e,r,s,n]},mapAdjustStrokes:function(){o.regions.forEach(function(t){t.svg_style["stroke-width"]&&t.node.css("stroke-width",t.svg_style["stroke-width"]/o.scale)})},zoomIn:function(){i.zoom(1)},zoomOut:function(){i.zoom(-1)},touchZoomStart:function(t){touchZoomStart=o._scale,o.scale=o.scale*zoom_k,zoom=o._scale,o._scale=o._scale*zoom_k;var e=o.viewBox[2],s=o.viewBox[3],r=[];r[2]=o._viewBox[2]/o._scale,r[3]=o._viewBox[3]/o._scale,r[0]=o.viewBox[0]+(e-r[2])/2,r[1]=viewBox[1]+(s-r[3])/2,i.setViewBox(r)},touchZoomMove:function(){},touchZoomEnd:function(){},zoom:function(t,e){var s=o.viewBox[2],r=o.viewBox[3],n=[];if(e)o._scale=e,n[2]=o.touchZoomStartViewBox[2]/o._scale,n[3]=o.touchZoomStartViewBox[3]/o._scale;else{var a=t>0?1:-1;if(o._zoomLevel=o.zoomLevel,o._zoomLevel+=a,o._zoomLevel>o.options.zoom.limit[1]||o._zoomLevel<o.options.zoom.limit[0])return!1;o.zoomLevel=o._zoomLevel;var l=a*o.options.zoom.delta;1>l&&(l=-1/l),o._scale=o._scale*l,n[2]=o._viewBox[2]/o._scale,n[3]=o._viewBox[3]/o._scale}n[0]=o.viewBox[0]+(s-n[2])/2,n[1]=o.viewBox[1]+(r-n[3])/2,i.setViewBox(n)},markerDelete:function(t){var e=t.id;o.markers.splice(o.markersDict[e],1);t["delete"](),t=null,i.updateMarkersDict(),0==o.markers.length&&(o.options.markerLastID=0)},markerAdd:function(t,e){var o=$.extend(!0,{},markerOptions,t);if(!o.src||!i.cnt())return!1;if(o.src=safeURL(o.src),o.width&&o.height)return i.markerAddFinalStep(o,e);var s=new Image;s.onload=function(){return o.width=this.width,o.height=this.height,i.markerAddFinalStep(o,e)},s.src=o.src},markerAddFinalStep:function(t,e){if(t.xy||isNumber(t.x)&&isNumber(t.y))xy=t.xy||[t.x,t.y],e&&(xy[0]+=o.scale<1?1:2,xy[1]+=1,xy[0]=xy[0]/o.scale-t.width/2+o.viewBox[0],xy[1]=xy[1]/o.scale-t.height+o.viewBox[1]);else{if(!t.geoCoords)return!1;xy=i.convertGeoToPixel(t.geoCoords),xy[0]=xy[0]-t.width/2+.3,xy[1]=xy[1]-t.height+1.5}t.x=xy[0],t.y=xy[1],t.id=t.id||"marker_"+o.options.markerLastID++,!t.geoCoords&&o.mapIsGeo&&(t.geoCoords=i.convertPixelToGeo(t.x+t.width/2,t.y+(t.height-1)));var s=new Marker(t,o.scale);return o.$svg.append(s.node),s.href&&s.setHref(s.href),s.adjustPosition(o.scale),o.markers.push(s),o.markersDict[s.id]=o.markers.length-1,e&&o.markerEditHandler&&o.markerEditHandler.call(s),s},markersAdjustPosition:function(){o.markers.forEach(function(t){t.adjustPosition(o.scale)})},markerMoveStart:function(){this.data("ox",parseFloat(this.attr("x"))),this.data("oy",parseFloat(this.attr("y")))},markerMove:function(t,e){t/=o.scale,e/=o.scale,this.attr({x:this.data("ox")+t,y:this.data("oy")+e})},markerMoveEnd:function(){this.data("ox")==this.attr("x")&&this.data("oy")==this.attr("y")&&e.markerEditHandler.call(this)},scrollStart:function(t,e){if($(t.target).hasClass("mapsvg-btn-zoom")||$(t.target).closest(".mapsvg-gauge").length)return!1;if(o.editMarkers.on&&"mapsvg-marker"==$(t.target).attr("class"))return!1;if(t.preventDefault(),touchDevice)var s=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]?t.originalEvent.touches[0]:t;else var s=t;o.scroll={},o.scroll.vxi=o.viewBox[0],o.scroll.vyi=o.viewBox[1],o.scroll.x=s.clientX,o.scroll.y=s.clientY,o.scroll.dx=0,o.scroll.dy=0,o.scroll.vx=0,o.scroll.vy=0,touchDevice||$("body").on("mousemove.scroll.mapsvg",i.scrollMove).on("mouseup.scroll.mapsvg",function(t){i.scrollEnd(t,e)})},scrollMove:function(t){t.preventDefault(),o.isScrolling=!0,$("body").css({cursor:"move"});var e=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]?t.originalEvent.touches[0]:t;o.scroll.dx=o.scroll.x-e.clientX,o.scroll.dy=o.scroll.y-e.clientY;var s=parseInt(o.scroll.vxi+o.scroll.dx/o.scale),r=parseInt(o.scroll.vyi+o.scroll.dy/o.scale);o.options.scroll.limit&&(s<o.svgDefault.viewBox[0]?s=o.svgDefault.viewBox[0]:o.viewBox[2]+s>o.svgDefault.viewBox[0]+o.svgDefault.viewBox[2]&&(s=o.svgDefault.viewBox[0]+o.svgDefault.viewBox[2]-o.viewBox[2]),r<o.svgDefault.viewBox[1]?r=o.svgDefault.viewBox[1]:o.viewBox[3]+r>o.svgDefault.viewBox[1]+o.svgDefault.viewBox[3]&&(r=o.svgDefault.viewBox[1]+o.svgDefault.viewBox[3]-o.viewBox[3])),o.scroll.vx=s,o.scroll.vy=r,i.setViewBox([o.scroll.vx,o.scroll.vy,o.viewBox[2],o.viewBox[3]])},scrollEnd:function(t,e){o.isScrolling=!1,Math.abs(o.scroll.dx)<5&&Math.abs(o.scroll.dy)<5&&(o.editMarkers.on?i.markerAddClickHandler(t):o.region_clicked&&i.regionClickHandler(t,o.region_clicked)),$("body").css({cursor:"default"}),o.viewBox[0]=o.scroll.vx||o.viewBox[0],o.viewBox[1]=o.scroll.vy||o.viewBox[1],$("body").off(".scroll.mapsvg")},scrollRegionClickHandler:function(t,e){o.region_clicked=e},touchStart:function(t,e){t.preventDefault();var s=t.originalEvent;o.options.zoom&&s.touches&&2==s.touches.length?(o.touchZoomStartViewBox=o.viewBox,o.touchZoomStart=o.scale,o.touchZoomEnd=1):(i.scrollStart(t,e),o.isScrolling=!0)},touchMove:function(t){t.preventDefault();var e=t.originalEvent;o.options.zoom&&e.touches&&e.touches.length>=2?(i.zoom(null,e.scale),o.isScrolling=!1):o.isScrolling&&i.scrollMove(t)},touchEnd:function(t){t.preventDefault();t.originalEvent;o.touchZoomStart?(o.touchZoomStart=!1,o.touchZoomEnd=!1):o.isScrolling&&i.scrollEnd(t)},markersGroupHide:function(t){for(var e in o.markers[t])o.markers[t][e].hide()},markersGroupShow:function(t){for(var e in o.markers[t])o.markers[t][e].show()},regionsGroupSelect:function(t){for(var e in o.markers[t])o.markers[t][e].hide()},regionsGroupUnselect:function(t){for(var e in o.markers[t])o.markers[t][e].show()},markersGet:function(){return o.markers},getSelected:function(){return o.selected_id},selectRegion:function(t){if("string"==typeof t)var e=i.getRegion(t);else var e=t;if(!e||e.disabled)return!1;if(o.options.multiSelect&&!o.editRegions.on){if(e.selected)return void i.deselectRegion(e)}else o.selected_id.length>0&&i.deselectRegion();o.selected_id.push(e.id),e.select()},deselectAllRegions:function(){$.each(o.selected_id,function(t,e){i.deselectRegion(i.getRegion(e))})},deselectRegion:function(t){t||(t=i.getRegion(o.selected_id[0])),t.deselect();var e=$.inArray(t.id,o.selected_id);o.selected_id.splice(e,1),_browser.ie&&i.mapAdjustStrokes()},selectRegionsGroup:function(t){for(var e in o.regionGroups[t]){var s=o.regionGroups[t][e].id;i.selectRegion(s)}},highlightRegionsGroup:function(t){for(var e in o.regionGroups[t]){var s=o.regionGroups[t][e].id;i.highlightRegion(s)}},unhighlightRegionsGroup:function(t){for(var e in o.regionGroups[t]){var s=o.regionGroups[t][e].id;i.unhighlightRegion(s)}},narrowToRegionsGroup:function(t){o.regions.forEach(function(e){e.group==t||e.disabled?e.disabledTemp&&(e.disabledTemp=!1,e.disabled=!1,$(e.node).removeClass("mapsvg-disabled")):(e.disabled=!0,e.disabledTemp=!0,$(e.node).addClass("mapsvg-disabled"))})},disableRegionsGroup:function(t){},enableAllRegionsGroups:function(){o.regions.forEach(function(t){t.disabledTemp&&(t.disabledTemp=!1,t.disabled=!1,$(t.node).removeClass("mapsvg-disabled"))})},convertGeoToPixel:function(t){var e=parseFloat(t[0]),i=parseFloat(t[1]),s=(i-o.geoViewBox.leftLon)*(o.svgDefault.width/o.mapLonDelta),e=3.14159*e/180,r=o.svgDefault.width/o.mapLonDelta*360/6.28318,n=r/2*Math.log((1+Math.sin(o.mapLatBottomDegree))/(1-Math.sin(o.mapLatBottomDegree))),a=o.svgDefault.height-(r/2*Math.log((1+Math.sin(e))/(1-Math.sin(e)))-n);return s+=o.svgDefault.viewBox[0],a+=o.svgDefault.viewBox[1],[s,a]},convertPixelToGeo:function(t,e){t-=o.svgDefault.viewBox[0],e-=o.svgDefault.viewBox[1];var i=o.svgDefault.width/o.mapLonDelta*360/(2*Math.PI),s=i/2*Math.log((1+Math.sin(o.mapLatBottomDegree))/(1-Math.sin(o.mapLatBottomDegree))),r=o.svgDefault.height+s,n=(r-e)/i,a=180/Math.PI*(2*Math.atan(Math.exp(n))-Math.PI/2),l=o.geoViewBox.leftLon+t/o.svgDefault.width*o.mapLonDelta;return[a,l]},isRegionDisabled:function(t,e){return o.options.regions[t]&&(o.options.regions[t].disabled||"none"==e)?!0:void 0!=o.options.regions[t]&&!parseBoolean(o.options.regions[t].disabled)||!o.options.disableAll&&"none"!=e&&"labels"!=t&&"Labels"!=t?!1:!0},regionClickHandler:function(t,e){if(!e||e.disabled)return!1;if(o.region_clicked=null,"region"==e.mapsvg_type&&i.selectRegion(e.id),o.editRegions.on)return void o.regionEditHandler.call(e);i.hidePopover();var s=i.getPopoverBody(e);s&&i.showPopover(t,s),touchDevice&&e.href&&!o.disableLinks&&(window.location.href=e.href)},fileExists:function(t){if("data"==t.substr(0,4))return!0;var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),404!=e.status},getStyle:function(t,e){if(t.currentStyle)var o=t.currentStyle.margin;else if(window.getComputedStyle)if(window.getComputedStyle.getPropertyValue)var o=window.getComputedStyle(t,null).getPropertyValue(e);else var o=window.getComputedStyle(t)[e];return o},search:function(t){return results=[],t=t.toLowerCase(),o.regions.forEach(function(e){(0===e.id.toLowerCase().indexOf(t)||e.title&&0===e.title.toLowerCase().indexOf(t))&&results.push(e.id)}),results},searchMarkers:function(t){return results=[],t=t.toLowerCase(),o.markers.forEach(function(e){0===e.id.toLowerCase().indexOf(t)&&results.push(e.id)}),results},markerAddClickHandler:function(t){if($(t.target).is("image"))return!1;var e=mouseCoords(t),s=e.x-o.$map.offset().left,r=e.y-o.$map.offset().top;return $.isNumeric(s)&&$.isNumeric(r)?void i.markerAdd({xy:[s,r],group:o.editMarkers.group},!0):!1},setMarkersEditMode:function(t){o.editMarkers.on=parseBoolean(t),i.deselectAllRegions(),i.setEventHandlers()},setRegionsEditMode:function(t){o.editRegions.on=parseBoolean(t),i.deselectAllRegions(),i.setEventHandlers()},setMarkers:function(t){$.each(t,function(t,e){i.markerAdd(e)})},setEventHandler:function(){},textBr:function(t){for(var e=[],o=t.split(/\n/),i=jQuery(document.createElement("div")),s=0;s<o.length;s++)e.push(i.text(o[s]).html());return e.join("<br />")},runUserFunction:function(t){try{t()}catch(e){console.log("MapSVG user-defined function error: (line "+e.line+"): "+e.message)}},showTooltip:function(t){if(t.disabled)return!1;var e;e="global"==o.options.tooltips.priority?"off"!=o.options.tooltips.mode&&t[o.options.tooltips.mode]||t.tooltip:t.tooltip||"off"!=o.options.tooltips.mode&&t[o.options.tooltips.mode],e&&(o.mapTip.html(i.textBr(e)),o.mapTip.addClass("mapsvg-tooltip-visible"))},getPopoverBody:function(t){return"off"!=o.options.popovers.mode||"global"!=o.options.popovers.priority?t.popover:void 0},showPopover:function(t,e,s){if(s&&2==s.length){var r=i.getScale();s[0]=o.$map.offset().left+s[0]*r,s[1]=o.$map.offset().top+s[1]*r}else var n=mouseCoords(t),s=[n.x,n.y];if(e){o.mapPopover.contentDiv.html(i.textBr(e));var a=s[0]-o.mapPopover.outerWidth(!1)/2,l=s[1]-o.mapPopover.outerHeight(!1)-14;0>a&&(a=0),0>l&&(l=0),o.mapPopover.css("left",a).css("top",l),o.mapPopover.addClass("mapsvg-popover-visible")}else o.mapPopover.removeClass("mapsvg-popover-visible")},hidePopover:function(){o.mapPopover.contentDiv.empty(),o.mapPopover.removeClass("mapsvg-popover-visible"),$("body").off("mousedown.popover.mapsvg",i.popoverOffHandler),o.options.onPopoverClose&&o.options.onPopoverClose.call(i)},hideTip:function(){o.mapTip.removeClass("mapsvg-tooltip-visible")},popoverOffHandler:function(t){return $(t.target).closest(".mapsvg-popover").length?!1:void i.hidePopover()},mouseOverHandler:function(t){this instanceof Region&&(this.selected||this.highlight()),i.showTooltip(this)},mouseOutHandler:function(t){this instanceof Region&&(this.selected||this.unhighlight()),i.hideTip()},updateOptions:function(t){$.extend(!0,o.options,t)},updateMarkersDict:function(){o.markersDict={},o.markers.forEach(function(t,e){o.markersDict[t.id]=e})},setEventHandlers:function(){if(o.$map.off(".common.mapsvg"),o.editMarkers.on){var t=touchDevice?"touchstart.common.mapsvg":"mousedown.common.mapsvg";
 o.$map.on(t,".mapsvg-marker",function(t){t.originalEvent.preventDefault();var e=i.getMarker($(this).attr("id")),s=mouseCoords(t);e.drag(s,o.scale,function(){o.mapIsGeo&&(this.geoCoords=i.convertPixelToGeo(this.x+this.width/2,this.y+(this.height-1))),o.markerEditHandler.call(this,!0)},function(){o.markerEditHandler.call(this)})})}if(touchDevice||(o.editMarkers.on||o.$map.on("mouseover.common.mapsvg",".mapsvg-region",function(t){var o=$(this).attr("id");i.mouseOverHandler.call(i.getRegion(o),t,i,e)}).on("mouseleave.common.mapsvg",".mapsvg-region",function(t){var o=$(this).attr("id");i.mouseOutHandler.call(i.getRegion(o),t,i,e)}),o.editRegions.on||o.$map.on("mouseover.common.mapsvg",".mapsvg-marker",function(t){var o=$(this).attr("id");i.mouseOverHandler.call(i.getMarker(o),t,i,e)}).on("mouseleave.common.mapsvg",".mapsvg-marker",function(t){var o=$(this).attr("id");i.mouseOutHandler.call(i.getMarker(o),t,i,e)})),o.options.scroll.on){var s=touchDevice?"touchstart.common.mapsvg":"mousedown.common.mapsvg";o.$map.on(s,".mapsvg-region",function(t){t.preventDefault();var e=i.getRegion($(this).attr("id"));i.scrollRegionClickHandler.call(i,t,e)}),o.$map.on(s,".mapsvg-marker",function(t){t.preventDefault();var e=i.getMarker($(this).attr("id"));i.scrollRegionClickHandler.call(i,t,e)}),touchDevice?o.$map.on("touchstart.common.mapsvg",function(t){i.touchStart(t,i)}).on("touchmove.common.mapsvg",i.touchMove).on("touchend.common.mapsvg",i.touchEnd):o.$map.on("mousedown.common.mapsvg",function(t){i.scrollStart(t,i)})}else{var s=touchDevice?"touchstart.common.mapsvg":"click.common.mapsvg";o.editMarkers.on?o.$map.on(s,function(t){i.markerAddClickHandler(t)}):(o.$map.on(s,".mapsvg-region",function(t){i.regionClickHandler.call(i,t,i.getRegion($(this).attr("id")))}),o.$map.on(s,".mapsvg-marker",function(t){i.regionClickHandler.call(i,t,i.getMarker($(this).attr("id")))}))}},init:function(t,e){if(!t.source)throw new Error("MapSVG: please provide SVG file source.");0===t.source.indexOf("//")?t.source=t.source.replace(/^\/\/[^\/]+/,"").replace("//","/"):t.source=t.source.replace(/^.*:\/\/[^\/]+/,"").replace("//","/"),o={},o.options=$.extend(!0,{},defaults,t),o.editRegions={on:!1},o.editMarkers={on:!1},o.map=e,o.$map=$(e),o.whRatio=0,o.isScrolling=!1,o.markerOptions={},o.svgDefault={},o.refLength=0,o.scale=1,o._scale=1,o.selected_id=[],o.mapData={},o.regions=[],o.regionsDict={},o.regionID={id:0},o.markers=[],o.code=o.markers,o.markersDict={},o._viewBox=[],o.viewBox=[],o.viewBoxZoom=[],o.viewBoxFind=void 0,o.zoomLevel=0,o.scroll={},o.geoCoordinates=!1,o.t=function(){return o.code.length>=5},o.geoViewBox={leftLon:0,topLat:0,rightLon:0,bottomLat:0},o.$map.addClass("mapsvg").css("background",o.options.colors.background);var s=$("<div>"+o.options.loadingText+"</div>").addClass("mapsvg-loading");return o.$map.append(s),s.css({"margin-left":function(){return-($(this).outerWidth(!1)/2)+"px"},"margin-top":function(){return-($(this).outerHeight(!1)/2)+"px"}}),$.ajax({url:o.options.source,success:function(t){$data=$(t);var e=$data.find("svg");if(o.$svg=e,o.svgDefault.width=e.attr("width"),o.svgDefault.height=e.attr("height"),o.svgDefault.viewBox=e.attr("viewBox"),o.svgDefault.width&&o.svgDefault.height)o.svgDefault.width=parseFloat(o.svgDefault.width.replace(/px/g,"")),o.svgDefault.height=parseFloat(o.svgDefault.height.replace(/px/g,"")),o.svgDefault.viewBox=o.svgDefault.viewBox?o.svgDefault.viewBox.split(" "):[0,0,o.svgDefault.width,o.svgDefault.height];else{if(!o.svgDefault.viewBox)return alert("MapSVG needs width/height or viewBox parameter to be present in SVG file."),!1;o.svgDefault.viewBox=o.svgDefault.viewBox.split(" "),o.svgDefault.width=parseFloat(o.svgDefault.viewBox[2]),o.svgDefault.height=parseFloat(o.svgDefault.viewBox[3])}var r=e.attr("mapsvg:geoViewBox");if(r&&(r=r.split(" "),4==r.length)){o.mapIsGeo=!0,o.geoCoordinates=!0;var n=e.attr("mapsvg:calibratedViewBox");o.geoViewBox={leftLon:parseFloat(r[0]),topLat:parseFloat(r[1]),rightLon:parseFloat(r[2]),bottomLat:parseFloat(r[3])},o.mapLonDelta=o.geoViewBox.rightLon-o.geoViewBox.leftLon,o.mapLatBottomDegree=3.14159*o.geoViewBox.bottomLat/180}$.each(o.svgDefault.viewBox,function(t,e){o.svgDefault.viewBox[t]=parseInt(e)}),o._viewBox=4==o.options.viewBox.length&&o.options.viewBox||o.svgDefault.viewBox,$.each(o._viewBox,function(t,e){o._viewBox[t]=parseFloat(e)}),e.attr("preserveAspectRatio","xMidYMid meet"),e.attr("width","100%"),e.attr("height","100%"),o.$svg.find("path, polygon, circle, ellipse, rect").each(function(t){var e=new Region($(this),o.options,o.regionID,i);o.regions.push(e),o.regionsDict[e.id]=t,e.autoID&&(o.presentAutoID=!0)}),i.setSize(o.options.width,o.options.height,o.options.responsive),o.$map.append(e);var n=o._viewBox;i.setViewBox(n);var a=o.options.markers||o.options.marks||[];i.setMarkers(a),i.setScroll(o.options.scroll),i.setZoom(o.options.zoom),o.options.tooltipsMode&&(o.options.tooltips.mode=o.options.tooltipsMode),i.setTooltips(o.options.tooltips),o.options.popover&&(o.options.popovers=o.options.popover),i.setPopovers(o.options.popovers),o.options.cursor&&i.setCursor(o.options.cursor),_browser.ie&&i.mapAdjustStrokes(),i.setEventHandlers(),$("#"+o.$map.attr("id")+" [title]").each(function(){this.removeAttribute("title")}),$("#"+o.$map.attr("id")+" title").remove(),s.hide(),o.options.afterLoad&&o.options.afterLoad.call(i),i.updateSize()}}),i}};var i=this.methods},$.fn.mapSvg=function(t){var e=$(this).attr("id");return"object"==typeof t&&void 0===instances[e]?(instances[e]=new mapSVG(this,t),instances[e].methods.init(t,this)):instances[e]?instances[e].methods:instances}}(jQuery),function(t){function e(t,i){if(t=t?t:"",i=i||{},t instanceof e)return t;if(!(this instanceof e))return new e(t,i);var s=o(t);this._originalInput=t,this._r=s.r,this._g=s.g,this._b=s.b,this._a=s.a,this._roundA=j(100*this._a)/100,this._format=i.format||s.format,this._gradientType=i.gradientType,this._r<1&&(this._r=j(this._r)),this._g<1&&(this._g=j(this._g)),this._b<1&&(this._b=j(this._b)),this._ok=s.ok,this._tc_id=T++}function o(t){var e={r:0,g:0,b:0},o=1,s=!1,n=!1;return"string"==typeof t&&(t=F(t)),"object"==typeof t&&(H(t.r)&&H(t.g)&&H(t.b)?(e=i(t.r,t.g,t.b),s=!0,n="%"===String(t.r).substr(-1)?"prgb":"rgb"):H(t.h)&&H(t.s)&&H(t.v)?(t.s=M(t.s),t.v=M(t.v),e=a(t.h,t.s,t.v),s=!0,n="hsv"):H(t.h)&&H(t.s)&&H(t.l)&&(t.s=M(t.s),t.l=M(t.l),e=r(t.h,t.s,t.l),s=!0,n="hsl"),t.hasOwnProperty("a")&&(o=t.a)),o=B(o),{ok:s,format:t.format||n,r:I(255,G(e.r,0)),g:I(255,G(e.g,0)),b:I(255,G(e.b,0)),a:o}}function i(t,e,o){return{r:255*S(t,255),g:255*S(e,255),b:255*S(o,255)}}function s(t,e,o){t=S(t,255),e=S(e,255),o=S(o,255);var i,s,r=G(t,e,o),n=I(t,e,o),a=(r+n)/2;if(r==n)i=s=0;else{var l=r-n;switch(s=a>.5?l/(2-r-n):l/(r+n),r){case t:i=(e-o)/l+(o>e?6:0);break;case e:i=(o-t)/l+2;break;case o:i=(t-e)/l+4}i/=6}return{h:i,s:s,l:a}}function r(t,e,o){function i(t,e,o){return 0>o&&(o+=1),o>1&&(o-=1),1/6>o?t+6*(e-t)*o:.5>o?e:2/3>o?t+(e-t)*(2/3-o)*6:t}var s,r,n;if(t=S(t,360),e=S(e,100),o=S(o,100),0===e)s=r=n=o;else{var a=.5>o?o*(1+e):o+e-o*e,l=2*o-a;s=i(l,a,t+1/3),r=i(l,a,t),n=i(l,a,t-1/3)}return{r:255*s,g:255*r,b:255*n}}function n(t,e,o){t=S(t,255),e=S(e,255),o=S(o,255);var i,s,r=G(t,e,o),n=I(t,e,o),a=r,l=r-n;if(s=0===r?0:l/r,r==n)i=0;else{switch(r){case t:i=(e-o)/l+(o>e?6:0);break;case e:i=(o-t)/l+2;break;case o:i=(t-e)/l+4}i/=6}return{h:i,s:s,v:a}}function a(e,o,i){e=6*S(e,360),o=S(o,100),i=S(i,100);var s=t.floor(e),r=e-s,n=i*(1-o),a=i*(1-r*o),l=i*(1-(1-r)*o),c=s%6,u=[i,a,n,n,l,i][c],h=[l,i,i,a,n,n][c],p=[n,n,l,i,i,a][c];return{r:255*u,g:255*h,b:255*p}}function l(t,e,o,i){var s=[C(j(t).toString(16)),C(j(e).toString(16)),C(j(o).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function c(t,e,o,i){var s=[C(O(i)),C(j(t).toString(16)),C(j(e).toString(16)),C(j(o).toString(16))];return s.join("")}function u(t,o){o=0===o?0:o||10;var i=e(t).toHsl();return i.s-=o/100,i.s=D(i.s),e(i)}function h(t,o){o=0===o?0:o||10;var i=e(t).toHsl();return i.s+=o/100,i.s=D(i.s),e(i)}function p(t){return e(t).desaturate(100)}function d(t,o){o=0===o?0:o||10;var i=e(t).toHsl();return i.l+=o/100,i.l=D(i.l),e(i)}function f(t,o){o=0===o?0:o||10;var i=e(t).toRgb();return i.r=G(0,I(255,i.r-j(255*-(o/100)))),i.g=G(0,I(255,i.g-j(255*-(o/100)))),i.b=G(0,I(255,i.b-j(255*-(o/100)))),e(i)}function g(t,o){o=0===o?0:o||10;var i=e(t).toHsl();return i.l-=o/100,i.l=D(i.l),e(i)}function v(t,o){var i=e(t).toHsl(),s=(i.h+o)%360;return i.h=0>s?360+s:s,e(i)}function m(t){var o=e(t).toHsl();return o.h=(o.h+180)%360,e(o)}function b(t){var o=e(t).toHsl(),i=o.h;return[e(t),e({h:(i+120)%360,s:o.s,l:o.l}),e({h:(i+240)%360,s:o.s,l:o.l})]}function w(t){var o=e(t).toHsl(),i=o.h;return[e(t),e({h:(i+90)%360,s:o.s,l:o.l}),e({h:(i+180)%360,s:o.s,l:o.l}),e({h:(i+270)%360,s:o.s,l:o.l})]}function x(t){var o=e(t).toHsl(),i=o.h;return[e(t),e({h:(i+72)%360,s:o.s,l:o.l}),e({h:(i+216)%360,s:o.s,l:o.l})]}function y(t,o,i){o=o||6,i=i||30;var s=e(t).toHsl(),r=360/i,n=[e(t)];for(s.h=(s.h-(r*o>>1)+720)%360;--o;)s.h=(s.h+r)%360,n.push(e(s));return n}function _(t,o){o=o||6;for(var i=e(t).toHsv(),s=i.h,r=i.s,n=i.v,a=[],l=1/o;o--;)a.push(e({h:s,s:r,v:n})),n=(n+l)%1;return a}function k(t){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[t[o]]=o);return e}function B(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function S(e,o){A(e)&&(e="100%");var i=R(e);return e=I(o,G(0,parseFloat(e))),i&&(e=parseInt(e*o,10)/100),t.abs(e-o)<1e-6?1:e%o/parseFloat(o)}function D(t){return I(1,G(0,t))}function $(t){return parseInt(t,16)}function A(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function R(t){return"string"==typeof t&&-1!=t.indexOf("%")}function C(t){return 1==t.length?"0"+t:""+t}function M(t){return 1>=t&&(t=100*t+"%"),t}function O(e){return t.round(255*parseFloat(e)).toString(16)}function L(t){return $(t)/255}function H(t){return!!U.CSS_UNIT.exec(t)}function F(t){t=t.replace(E,"").replace(P,"").toLowerCase();var e=!1;if(N[t])t=N[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var o;return(o=U.rgb.exec(t))?{r:o[1],g:o[2],b:o[3]}:(o=U.rgba.exec(t))?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=U.hsl.exec(t))?{h:o[1],s:o[2],l:o[3]}:(o=U.hsla.exec(t))?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=U.hsv.exec(t))?{h:o[1],s:o[2],v:o[3]}:(o=U.hsva.exec(t))?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=U.hex8.exec(t))?{a:L(o[1]),r:$(o[2]),g:$(o[3]),b:$(o[4]),format:e?"name":"hex8"}:(o=U.hex6.exec(t))?{r:$(o[1]),g:$(o[2]),b:$(o[3]),format:e?"name":"hex"}:(o=U.hex3.exec(t))?{r:$(o[1]+""+o[1]),g:$(o[2]+""+o[2]),b:$(o[3]+""+o[3]),format:e?"name":"hex"}:!1}function z(t){var e,o;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),o=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==o&&"large"!==o&&(o="small"),{level:e,size:o}}var E=/^\s+/,P=/\s+$/,T=0,j=t.round,I=t.min,G=t.max,V=t.random;e.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,o,i,s,r,n,a=this.toRgb();return e=a.r/255,o=a.g/255,i=a.b/255,s=.03928>=e?e/12.92:t.pow((e+.055)/1.055,2.4),r=.03928>=o?o/12.92:t.pow((o+.055)/1.055,2.4),n=.03928>=i?i/12.92:t.pow((i+.055)/1.055,2.4),.2126*s+.7152*r+.0722*n},setAlpha:function(t){return this._a=B(t),this._roundA=j(100*this._a)/100,this},toHsv:function(){var t=n(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=n(this._r,this._g,this._b),e=j(360*t.h),o=j(100*t.s),i=j(100*t.v);return 1==this._a?"hsv("+e+", "+o+"%, "+i+"%)":"hsva("+e+", "+o+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=s(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=s(this._r,this._g,this._b),e=j(360*t.h),o=j(100*t.s),i=j(100*t.l);return 1==this._a?"hsl("+e+", "+o+"%, "+i+"%)":"hsla("+e+", "+o+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return l(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return c(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:j(this._r),g:j(this._g),b:j(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+j(this._r)+", "+j(this._g)+", "+j(this._b)+")":"rgba("+j(this._r)+", "+j(this._g)+", "+j(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:j(100*S(this._r,255))+"%",g:j(100*S(this._g,255))+"%",b:j(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+j(100*S(this._r,255))+"%, "+j(100*S(this._g,255))+"%, "+j(100*S(this._b,255))+"%)":"rgba("+j(100*S(this._r,255))+"%, "+j(100*S(this._g,255))+"%, "+j(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:Z[l(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var o="#"+c(this._r,this._g,this._b,this._a),i=o,s=this._gradientType?"GradientType = 1, ":"";if(t){var r=e(t);i=r.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+o+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var o=!1,i=this._a<1&&this._a>=0,s=!e&&i&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return s?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(o=this.toRgbString()),"prgb"===t&&(o=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(o=this.toHexString()),"hex3"===t&&(o=this.toHexString(!0)),"hex8"===t&&(o=this.toHex8String()),"name"===t&&(o=this.toName()),"hsl"===t&&(o=this.toHslString()),"hsv"===t&&(o=this.toHsvString()),o||this.toHexString())},clone:function(){return e(this.toString())},_applyModification:function(t,e){var o=t.apply(null,[this].concat([].slice.call(e)));return this._r=o._r,this._g=o._g,this._b=o._b,this.setAlpha(o._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(u,arguments)},saturate:function(){return this._applyModification(h,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(_,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},e.fromRatio=function(t,o){if("object"==typeof t){var i={};for(var s in t)t.hasOwnProperty(s)&&("a"===s?i[s]=t[s]:i[s]=M(t[s]));t=i}return e(t,o)},e.equals=function(t,o){return t&&o?e(t).toRgbString()==e(o).toRgbString():!1},e.random=function(){return e.fromRatio({r:V(),g:V(),b:V()})},e.mix=function(t,o,i){i=0===i?0:i||50;var s,r=e(t).toRgb(),n=e(o).toRgb(),a=i/100,l=2*a-1,c=n.a-r.a;s=l*c==-1?l:(l+c)/(1+l*c),s=(s+1)/2;var u=1-s,h={r:n.r*s+r.r*u,g:n.g*s+r.g*u,b:n.b*s+r.b*u,a:n.a*a+r.a*(1-a)};return e(h)},e.readability=function(o,i){var s=e(o),r=e(i);return(t.max(s.getLuminance(),r.getLuminance())+.05)/(t.min(s.getLuminance(),r.getLuminance())+.05)},e.isReadable=function(t,o,i){var s,r,n=e.readability(t,o);switch(r=!1,s=z(i),s.level+s.size){case"AAsmall":case"AAAlarge":r=n>=4.5;break;case"AAlarge":r=n>=3;break;case"AAAsmall":r=n>=7}return r},e.mostReadable=function(t,o,i){var s,r,n,a,l=null,c=0;i=i||{},r=i.includeFallbackColors,n=i.level,a=i.size;for(var u=0;u<o.length;u++)s=e.readability(t,o[u]),s>c&&(c=s,l=e(o[u]));return e.isReadable(t,l,{level:n,size:a})||!r?l:(i.includeFallbackColors=!1,e.mostReadable(t,["#fff","#000"],i))};var N=e.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Z=e.hexNames=k(N),U=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",o="(?:"+e+")|(?:"+t+")",i="[\\s|\\(]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")\\s*\\)?",s="[\\s|\\(]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")\\s*\\)?";return{CSS_UNIT:new RegExp(o),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.tinycolor=e}(Math);